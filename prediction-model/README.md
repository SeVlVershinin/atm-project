# Конвеер обучения модели прогнозирования популярности размещения банкомата

Сервис выполняет загрузку данных, подготовленных сервисом data-collection, подготавливает данные, обучает модель и сохраняет ее для дальнейшего использования в сервисе `prediction-service`

### Состав файлов репозитория

- `config/files` - настройки путей к файлам, которые используются в процессе обучения модели
- `config/main_conf` - основные настройки, которые включают в себя url для доступа к серверу MLFlow, а также параметры обучения модели
- `data` - директория хранения файлов по-умолчанию. Версионирование данных осуществляется с помощью библиотеки DVC
- `prediction_model/stages` - код этапов подготовки данных и обучения модели
- `prediction_model/stages/load_data` - код загрузки данных из сервиса `data-collection`
- `prediction_model/stages/extract_features` - код подготовки данных для обучения
- `prediction_model/stages/train` - код обучения и сохранения модели

### Запуск сервиса

- сохраните локально репозиторий
- активируйте виртуальное окружение python в директории проекта `/atm-project/prediction-model`
- установите зависимости `poetry install`
- получите json файл сервисного аккаунта GDrive `service_account_config.json` и скопируйте его в директорию `/atm-project/config`
- укажите актуальный `mlflow_url` в файле `./config/main_conf.yaml`
- запустите сервер MLFlow `mlflow ui`
- запустите конвеер обучение командой `python train.py` из директории сервиса
